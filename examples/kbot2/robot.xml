<mujoco model="kbot-v2">
  <default>
    <default class="robot">
      <default class="motor_00">
        <joint armature="0.0005" frictionloss="0.1" actuatorfrcrange="-14.0 14.0" />
        <motor ctrlrange="-14.0 14.0" />
      </default>
      <default class="motor_02">
        <joint armature="0.002" frictionloss="0.1" actuatorfrcrange="-17.0 17.0" />
        <motor ctrlrange="-17.0 17.0" />
      </default>
      <default class="motor_03">
        <joint armature="0.005" frictionloss="0.3" actuatorfrcrange="-60.0 60.0" />
        <motor ctrlrange="-60.0 60.0" />
      </default>
      <default class="motor_04">
        <joint armature="0.007" frictionloss="0.1" actuatorfrcrange="-120.0 120.0" />
        <motor ctrlrange="-120.0 120.0" />
      </default>
      <default class="visual">
        <geom material="visualgeom" contype="0" conaffinity="0" group="2" />
      </default>
      <default class="collision">
        <geom condim="6" friction="0.8 0.02 0.01" group="3" />
      </default>
    </default>
  </default>

  <compiler angle="radian" />

  <asset>
    <material name="floating_base_link_material" rgba="1 0 0 1" />
    <material name="KB_B_102B_TORSO_BOTTOM_material" rgba="0.615686 0.811765 0.929412 1" />
    <material name="YOKE_STOP_INNER_material" rgba="0.231373 0.380392 0.705882 1" />
    <material name="KB_D_102R_R_Hip_Yoke_Drive_material" rgba="0.262745 0.282353 0.301961 1" />
    <material name="KB_D_301R_R_Femur_Lower_Drive_material" rgba="0.439216 0.474510 0.501961 1" />
    <material name="R_Bicep_Lower_Drive_material" rgba="0.764706 0.545098 0.803922 1" />
    <material name="KB_D_401R_R_Shin_Drive_material" rgba="0.349020 0.376471 0.400000 1" />
    <material name="KB_C_501X_Bayonet_Adapter_Hard_Stop_material" rgba="0.917647 0.917647 0.917647 1" />
    <material name="KB_D_501R_R_LEG_FOOT_material" rgba="0.972549 0.529412 0.003922 1" />
    <material name="default_material" rgba="0.7 0.7 0.7 1" />
    <mesh name="KB_B_102B_TORSO_BOTTOM.stl" file="meshes/KB_B_102B_TORSO_BOTTOM.stl" />
    <mesh name="YOKE_STOP_INNER.stl" file="meshes/YOKE_STOP_INNER.stl" />
    <mesh name="RS03_5.stl" file="meshes/RS03_5.stl" />
    <mesh name="R_Bicep_Lower_Drive.stl" file="meshes/R_Bicep_Lower_Drive.stl" />
    <mesh name="R_Forearm_Upper_Structural.stl" file="meshes/R_Forearm_Upper_Structural.stl" />
    <mesh name="KB_C_501X_Bayonet_Adapter_Hard_Stop.stl" file="meshes/KB_C_501X_Bayonet_Adapter_Hard_Stop.stl" />
    <mesh name="YOKE_STOP_INNER_2.stl" file="meshes/YOKE_STOP_INNER_2.stl" />
    <mesh name="RS03_6.stl" file="meshes/RS03_6.stl" />
    <mesh name="L_Bicep_Lower_Drive.stl" file="meshes/L_Bicep_Lower_Drive.stl" />
    <mesh name="L_Forearm_Upper_Drive.stl" file="meshes/L_Forearm_Upper_Drive.stl" />
    <mesh name="KB_C_501X_Bayonet_Adapter_Hard_Stop_2.stl" file="meshes/KB_C_501X_Bayonet_Adapter_Hard_Stop_2.stl" />
    <mesh name="KB_D_102R_R_Hip_Yoke_Drive.stl" file="meshes/KB_D_102R_R_Hip_Yoke_Drive.stl" />
    <mesh name="RS03_3.stl" file="meshes/RS03_3.stl" />
    <mesh name="KB_D_301R_R_Femur_Lower_Drive.stl" file="meshes/KB_D_301R_R_Femur_Lower_Drive.stl" />
    <mesh name="KB_D_401R_R_Shin_Drive.stl" file="meshes/KB_D_401R_R_Shin_Drive.stl" />
    <mesh name="KB_D_501R_R_LEG_FOOT.collision.stl" file="meshes/KB_D_501R_R_LEG_FOOT.collision.stl" />
    <mesh name="KB_D_501R_R_LEG_FOOT.stl" file="meshes/KB_D_501R_R_LEG_FOOT.stl" />
    <mesh name="KB_D_102L_L_Hip_Yoke_Drive.stl" file="meshes/KB_D_102L_L_Hip_Yoke_Drive.stl" />
    <mesh name="RS03_4.stl" file="meshes/RS03_4.stl" />
    <mesh name="KB_D_301L_L_Femur_Lower_Drive.stl" file="meshes/KB_D_301L_L_Femur_Lower_Drive.stl" />
    <mesh name="KB_D_402L_L_Shin_Idle.stl" file="meshes/KB_D_402L_L_Shin_Idle.stl" />
    <mesh name="KB_D_501L_L_LEG_FOOT.collision.stl" file="meshes/KB_D_501L_L_LEG_FOOT.collision.stl" />
    <mesh name="KB_D_501L_L_LEG_FOOT.stl" file="meshes/KB_D_501L_L_LEG_FOOT.stl" />
    <mesh name="imu.stl" file="meshes/imu.stl" />
  </asset>

  <worldbody>
    <body name="floating_base_link" pos="0.00000000 0.00000000 0.80024304" childclass="robot">
      <freejoint name="floating_base" />
      <geom name="floating_base_link_visual" quat="0.0007963267107332633 0.0 0.0 0.9999996829318346" material="floating_base_link_material" type="sphere" size="0.01" class="visual" />
      <body name="KB_B_102B_TORSO_BOTTOM" quat="0.0007963267107332633 0.0 0.0 0.9999996829318346">
        <inertial pos="0.000403 0.002187 0.165184" mass="15.673149" diaginertia="0.64165 0.678247 0.075462" />
        <geom name="KB_B_102B_TORSO_BOTTOM_visual" material="KB_B_102B_TORSO_BOTTOM_material" type="mesh" mesh="KB_B_102B_TORSO_BOTTOM.stl" class="visual" />
        <body name="YOKE_STOP_INNER" pos="0.120950 -0.000737 0.337507" quat="0.5000001633974483 -0.4999999999999733 -0.49999983660255165 0.4999999999999733">
          <joint name="right_shoulder_pitch_03" type="hinge" class="motor_03" range="-2.617994 2.094395" axis="0 0 1" />
          <inertial pos="0.006667 -0.003840 -0.041983" mass="0.585630" diaginertia="0.001005 0.001376 0.00114" />
          <geom name="YOKE_STOP_INNER_visual" material="YOKE_STOP_INNER_material" type="mesh" mesh="YOKE_STOP_INNER.stl" class="visual" />
          <body name="RS03_5" pos="0.024250 0 -0.080000" quat="-1.2247452309842457e-07 -0.7071068967259713 1.22474483074382e-07 -0.7071066656470838">
            <joint name="right_shoulder_roll_03" type="hinge" class="motor_03" range="-0.488692 1.658063" axis="0 0 -1.0" />
            <inertial pos="-0.005670 -0.043712 -0.030222" mass="1.888573" diaginertia="0.007759 0.002169 0.008277" />
            <geom name="RS03_5_visual" material="KB_B_102B_TORSO_BOTTOM_material" type="mesh" mesh="RS03_5.stl" class="visual" />
            <body name="R_Bicep_Lower_Drive" pos="-0.013000 -0.142000 -0.030250" quat="0.7071068967259818 -0.7071066656470943 0.0 0.0">
              <joint name="right_shoulder_yaw_02" type="hinge" class="motor_02" range="-1.745329 1.745329" axis="0 0 1" />
              <inertial pos="0.001741 -0.003128 -0.096105" mass="0.863923" diaginertia="0.003004 0.002789 0.000894" />
              <geom name="R_Bicep_Lower_Drive_visual" material="R_Bicep_Lower_Drive_material" type="mesh" mesh="R_Bicep_Lower_Drive.stl" class="visual" />
              <body name="R_Forearm_Upper_Structural" pos="0.018500 -0.010000 -0.137000" quat="0.5000001633974483 -0.4999999999999733 -0.49999983660255165 0.4999999999999733">
                <joint name="right_elbow_02" type="hinge" class="motor_02" range="0 2.530727" axis="0 0 1" />
                <inertial pos="0.016090 0.059049 0.014470" mass="0.676940" diaginertia="0.001393 0.00069 0.001383" />
                <geom name="R_Forearm_Upper_Structural_visual" material="KB_B_102B_TORSO_BOTTOM_material" type="mesh" mesh="R_Forearm_Upper_Structural.stl" class="visual" />
                <body name="KB_C_501X_Bayonet_Adapter_Hard_Stop" pos="0.017350 0.107700 0.018000" quat="0.5000001633974483 0.4999999999999733 0.4999999999999733 -0.49999983660255165">
                  <joint name="right_wrist_02" type="hinge" class="motor_02" range="-1.745329 1.745329" axis="0 0 1" />
                  <inertial pos="-0.002571 0.000004 -0.039371" mass="0.571799" diaginertia="0.00075 0.00072 0.000581" />
                  <geom name="KB_C_501X_Bayonet_Adapter_Hard_Stop_visual" material="KB_C_501X_Bayonet_Adapter_Hard_Stop_material" type="mesh" mesh="KB_C_501X_Bayonet_Adapter_Hard_Stop.stl" class="visual" />
                </body>
              </body>
            </body>
          </body>
        </body>
        <body name="YOKE_STOP_INNER_2" pos="-0.120950 -0.000737 0.337507" quat="0.5000001633974483 0.4999999999999733 0.49999983660255165 0.4999999999999733">
          <joint name="left_shoulder_pitch_03" type="hinge" class="motor_03" range="-2.094395 2.617994" axis="0 0 1" />
          <inertial pos="0.006762 0.003839 -0.041982" mass="0.585652" diaginertia="0.001005 0.00137 0.001134" />
          <geom name="YOKE_STOP_INNER_2_visual" material="YOKE_STOP_INNER_material" type="mesh" mesh="YOKE_STOP_INNER_2.stl" class="visual" />
          <body name="RS03_6" pos="0.024250 0 -0.080000" quat="0.7071068967259818 0.0 0.7071066656470943 0.0">
            <joint name="left_shoulder_roll_03" type="hinge" class="motor_03" range="-1.658063 0.488692" axis="0 0 -1.0" />
            <inertial pos="0.005670 -0.043728 -0.030222" mass="1.888599" diaginertia="0.007765 0.002169 0.008283" />
            <geom name="RS03_6_visual" material="KB_B_102B_TORSO_BOTTOM_material" type="mesh" mesh="RS03_6.stl" class="visual" />
            <body name="L_Bicep_Lower_Drive" pos="0.013000 -0.142000 -0.030250" quat="0.7071068967259818 -0.7071066656470943 0.0 0.0">
              <joint name="left_shoulder_yaw_02" type="hinge" class="motor_02" range="-1.745329 1.745329" axis="0 0 1" />
              <inertial pos="-0.001724 -0.003123 -0.096088" mass="0.864297" diaginertia="0.003004 0.00279 0.000895" />
              <geom name="L_Bicep_Lower_Drive_visual" material="R_Bicep_Lower_Drive_material" type="mesh" mesh="L_Bicep_Lower_Drive.stl" class="visual" />
              <body name="L_Forearm_Upper_Drive" pos="-0.018500 -0.010000 -0.137000" quat="0.5000001633974483 0.4999999999999733 0.49999983660255165 0.4999999999999733">
                <joint name="left_elbow_02" type="hinge" class="motor_02" range="-2.530727 0" axis="0 0 1" />
                <inertial pos="0.016089 -0.059049 0.014469" mass="0.676937" diaginertia="0.001393 0.00069 0.001383" />
                <geom name="L_Forearm_Upper_Drive_visual" material="KB_B_102B_TORSO_BOTTOM_material" type="mesh" mesh="L_Forearm_Upper_Drive.stl" class="visual" />
                <body name="KB_C_501X_Bayonet_Adapter_Hard_Stop_2" pos="0.017350 -0.106500 0.018000" quat="0.5000001633974483 0.4999999999999733 -0.4999999999999733 0.49999983660255165">
                  <joint name="left_wrist_02" type="hinge" class="motor_02" range="-1.745329 1.745329" axis="0 0 -1" />
                  <inertial pos="0.002571 0.000004 0.040871" mass="0.571799" diaginertia="0.00075 0.00072 0.000581" />
                  <geom name="KB_C_501X_Bayonet_Adapter_Hard_Stop_2_visual" material="KB_C_501X_Bayonet_Adapter_Hard_Stop_material" type="mesh" mesh="KB_C_501X_Bayonet_Adapter_Hard_Stop_2.stl" class="visual" />
                </body>
              </body>
            </body>
          </body>
        </body>
        <body name="KB_D_102R_R_Hip_Yoke_Drive" pos="0.056000 -0.000737 -0.072993" quat="0.5000001633974483 0.4999999999999733 -0.49999983660255165 -0.4999999999999733">
          <joint name="right_hip_pitch_04" type="hinge" class="motor_04" range="-1.919862 1.570796" axis="0 0 1" />
          <inertial pos="-0.005187 -0.002374 -0.039157" mass="0.710534" diaginertia="0.001285 0.00155 0.001729" />
          <geom name="KB_D_102R_R_Hip_Yoke_Drive_visual" material="KB_D_102R_R_Hip_Yoke_Drive_material" type="mesh" mesh="KB_D_102R_R_Hip_Yoke_Drive.stl" class="visual" />
          <body name="RS03_3" pos="-0.028250 -0.030000 -0.071000" quat="0.7071068967259818 0.0 -0.7071066656470943 0.0">
            <joint name="right_hip_roll_03" type="hinge" class="motor_03" range="0 2.268928" axis="0 0 -1.0" />
            <inertial pos="-0.000677 -0.058256 -0.028289" mass="2.590316" diaginertia="0.011063 0.003804 0.01158" />
            <geom name="RS03_3_visual" material="KB_B_102B_TORSO_BOTTOM_material" type="mesh" mesh="RS03_3.stl" class="visual" />
            <body name="KB_D_301R_R_Femur_Lower_Drive" pos="0 -0.142750 -0.029800" quat="0.7071068967259818 0.7071066656470943 0.0 0.0">
              <joint name="right_hip_yaw_03" type="hinge" class="motor_03" range="-1.570796 1.570796" axis="0 0 -1" />
              <inertial pos="0.000139 -0.010511 0.162474" mass="2.556834" diaginertia="0.018026 0.016368 0.004729" />
              <geom name="KB_D_301R_R_Femur_Lower_Drive_visual" material="KB_D_301R_R_Femur_Lower_Drive_material" type="mesh" mesh="KB_D_301R_R_Femur_Lower_Drive.stl" class="visual" />
              <body name="KB_D_401R_R_Shin_Drive" pos="0.020600 -0.021000 0.212000" quat="0.5000001633974483 0.4999999999999733 -0.49999983660255165 -0.4999999999999733">
                <joint name="right_knee_04" type="hinge" class="motor_04" range="-2.705260 0" axis="0 0 1" />
                <inertial pos="-0.026847 0.095560 0.020795" mass="2.016717" diaginertia="0.017602 0.003759 0.017275" />
                <geom name="KB_D_401R_R_Shin_Drive_visual" material="KB_D_401R_R_Shin_Drive_material" type="mesh" mesh="KB_D_401R_R_Shin_Drive.stl" class="visual" />
                <body name="KB_D_501R_R_LEG_FOOT" pos="-0.031300 0.292500 0.034000">
                  <joint name="right_ankle_02" type="hinge" class="motor_02" range="-0.296706 0.785398" axis="0 0 1" />
                  <inertial pos="-0.013265 0.028578 -0.016056" mass="0.492747" diaginertia="0.000283 0.00156 0.001485" />
                  <!-- Original mesh-based collision (commented out) -->
                  <!-- <geom name="KB_D_501R_R_LEG_FOOT_collision" type="mesh" mesh="KB_D_501R_R_LEG_FOOT.collision.stl" class="collision" />
                  <geom name="KB_D_501R_R_LEG_FOOT_visual" material="KB_D_501R_R_LEG_FOOT_material" type="mesh" mesh="KB_D_501R_R_LEG_FOOT.collision.stl" class="visual" /> -->

                  <!-- Box-based collision using computed center and half-extents -->
                  <geom name="KB_D_501R_R_LEG_FOOT_box_collision" type="box" pos="-0.02848 0.0431438 -0.01400" size="0.10099 0.00602 0.03600" class="collision" />
                  <geom name="KB_D_501R_R_LEG_FOOT_box_visual" type="box" pos="-0.02848 0.0431438 -0.01400" size="0.10099 0.00602 0.03600" material="KB_D_501R_R_LEG_FOOT_material" class="visual" />
                </body>
              </body>
            </body>
          </body>
        </body>
        <body name="KB_D_102L_L_Hip_Yoke_Drive" pos="-0.056000 -0.000737 -0.072993" quat="0.5000001633974483 -0.4999999999999733 0.49999983660255165 -0.4999999999999733">
          <joint name="left_hip_pitch_04" type="hinge" class="motor_04" range="-1.570796 1.919862" axis="0 0 1" />
          <inertial pos="-0.005269 0.002433 -0.039157" mass="0.710534" diaginertia="0.001287 0.001544 0.001726" />
          <geom name="KB_D_102L_L_Hip_Yoke_Drive_visual" material="KB_D_102R_R_Hip_Yoke_Drive_material" type="mesh" mesh="KB_D_102L_L_Hip_Yoke_Drive.stl" class="visual" />
          <body name="RS03_4" pos="-0.028250 0.030000 -0.071000" quat="-1.2247452309842457e-07 0.7071068967259713 -1.22474483074382e-07 -0.7071066656470838">
            <joint name="left_hip_roll_03" type="hinge" class="motor_03" range="-2.268928 0" axis="0 0 -1.0" />
            <inertial pos="0.000677 -0.058257 -0.028289" mass="2.590429" diaginertia="0.011064 0.003804 0.01158" />
            <geom name="RS03_4_visual" material="KB_B_102B_TORSO_BOTTOM_material" type="mesh" mesh="RS03_4.stl" class="visual" />
            <body name="KB_D_301L_L_Femur_Lower_Drive" pos="0 -0.142750 -0.029800" quat="0.7071068967259818 0.7071066656470943 0.0 0.0">
              <joint name="left_hip_yaw_03" type="hinge" class="motor_03" range="-1.570796 1.570796" axis="0 0 -1" />
              <inertial pos="-0.000139 -0.010511 0.162476" mass="2.556767" diaginertia="0.018025 0.016367 0.004728" />
              <geom name="KB_D_301L_L_Femur_Lower_Drive_visual" material="KB_D_301R_R_Femur_Lower_Drive_material" type="mesh" mesh="KB_D_301L_L_Femur_Lower_Drive.stl" class="visual" />
              <body name="KB_D_402L_L_Shin_Idle" pos="0.043200 -0.021000 0.212000" quat="0.5000001633974483 -0.4999999999999733 0.49999983660255165 -0.4999999999999733">
                <joint name="left_knee_04" type="hinge" class="motor_04" range="0 2.705260" axis="0 0 1.0" />
                <inertial pos="-0.026848 -0.095563 -0.042713" mass="2.016574" diaginertia="0.017575 0.003732 0.017275" />
                <geom name="KB_D_402L_L_Shin_Idle_visual" material="KB_D_401R_R_Shin_Drive_material" type="mesh" mesh="KB_D_402L_L_Shin_Idle.stl" class="visual" />
                <body name="KB_D_501L_L_LEG_FOOT" pos="-0.031300 -0.292500 -0.057200">
                  <joint name="left_ankle_02" type="hinge" class="motor_02" range="-0.785398 0.296706" axis="0 0 1.0" />
                  <inertial pos="-0.013265 -0.028578 0.011944" mass="0.492748" diaginertia="0.000283 0.00156 0.001485" />
                  <!-- Original mesh-based collision (commented out) -->
                  <!-- <geom name="KB_D_501L_L_LEG_FOOT_collision" type="mesh" mesh="KB_D_501L_L_LEG_FOOT.collision.stl" class="collision" />
                  <geom name="KB_D_501L_L_LEG_FOOT_visual" material="KB_D_501R_R_LEG_FOOT_material" type="mesh" mesh="KB_D_501L_L_LEG_FOOT.collision.stl" class="visual" /> -->
                  
                  <!-- Box-based collision using adjusted center and half-extents (mirror y coordinate) -->
                  <geom name="KB_D_501L_L_LEG_FOOT_box_collision" type="box" pos="-0.02848 -0.0431438 0.0135400" size="0.10099 0.00602 0.03600" class="collision" />
                  <geom name="KB_D_501L_L_LEG_FOOT_box_visual" type="box" pos="-0.02848 -0.0431438 0.0135400" size="0.10099 0.00602 0.03600" material="KB_D_501R_R_LEG_FOOT_material" class="visual" />
                </body>
              </body>
            </body>
          </body>
        </body>
        <body name="imu" pos="-0.028807 -0.009800 0.452404" quat="0.7071068967259818 0.0 -0.7071066656470943 0.0">
          <inertial pos="0.012000 -0.014737 0.003000" mass="0.005700" diaginertia="1e-06 1e-06 2e-06" />
          <geom name="imu_visual" material="KB_B_102B_TORSO_BOTTOM_material" type="mesh" mesh="imu.stl" class="visual" />
          <site name="imu_site" />
        </body>
      </body>
      <site name="floating_base_link_site" />
      <camera name="front_camera" mode="track" fovy="90.0" quat="4.329780281177467e-17 4.329780281177466e-17 0.7071067811865475 0.7071067811865476" pos="0.0 2.0 0.5" />
      <camera name="side_camera" mode="track" fovy="90.0" quat="-0.5 -0.4999999999999999 0.5 0.5000000000000001" pos="-2.0 0.0 0.5" />
    </body>
  </worldbody>

  <actuator>
    <motor name="right_shoulder_pitch_03_ctrl" joint="right_shoulder_pitch_03" class="motor_03" />
    <motor name="right_shoulder_roll_03_ctrl" joint="right_shoulder_roll_03" class="motor_03" />
    <motor name="right_shoulder_yaw_02_ctrl" joint="right_shoulder_yaw_02" class="motor_02" />
    <motor name="right_elbow_02_ctrl" joint="right_elbow_02" class="motor_02" />
    <motor name="right_wrist_02_ctrl" joint="right_wrist_02" class="motor_02" />
    <motor name="left_shoulder_pitch_03_ctrl" joint="left_shoulder_pitch_03" class="motor_03" />
    <motor name="left_shoulder_roll_03_ctrl" joint="left_shoulder_roll_03" class="motor_03" />
    <motor name="left_shoulder_yaw_02_ctrl" joint="left_shoulder_yaw_02" class="motor_02" />
    <motor name="left_elbow_02_ctrl" joint="left_elbow_02" class="motor_02" />
    <motor name="left_wrist_02_ctrl" joint="left_wrist_02" class="motor_02" />
    <motor name="right_hip_pitch_04_ctrl" joint="right_hip_pitch_04" class="motor_04" />
    <motor name="right_hip_roll_03_ctrl" joint="right_hip_roll_03" class="motor_03" />
    <motor name="right_hip_yaw_03_ctrl" joint="right_hip_yaw_03" class="motor_03" />
    <motor name="right_knee_04_ctrl" joint="right_knee_04" class="motor_04" />
    <motor name="right_ankle_02_ctrl" joint="right_ankle_02" class="motor_02" />
    <motor name="left_hip_pitch_04_ctrl" joint="left_hip_pitch_04" class="motor_04" />
    <motor name="left_hip_roll_03_ctrl" joint="left_hip_roll_03" class="motor_03" />
    <motor name="left_hip_yaw_03_ctrl" joint="left_hip_yaw_03" class="motor_03" />
    <motor name="left_knee_04_ctrl" joint="left_knee_04" class="motor_04" />
    <motor name="left_ankle_02_ctrl" joint="left_ankle_02" class="motor_02" />
  </actuator>

  <sensor>
    <accelerometer name="imu_acc" site="imu_site" noise="0.01" />
    <gyro name="imu_gyro" site="imu_site" noise="0.01" />
    <magnetometer name="imu_mag" site="imu_site" noise="0.05" />
    <framepos name="base_link_pos" objtype="site" objname="imu_site" />
    <framequat name="base_link_quat" objtype="site" objname="imu_site" />
    <framelinvel name="base_link_vel" objtype="site" objname="imu_site" />
    <frameangvel name="base_link_ang_vel" objtype="site" objname="imu_site" />
  </sensor>
</mujoco>